
<select class=" cate0 form-control short-auto" name="cid0" id="cate1">
	<option value='0'>全部一级分类</option>
</select>  
<select class=" cate form-control short-auto" name="cid" id="cate2">
	<option class="cate230" value='0'>未选择二级分类</option> 
</select> &nbsp;&nbsp; 
 
<script>
 
$(function(){ 
	 
	var cid0="{$cid0|default=0}";
	var cid="{$cid|default=0}";
	var url_get_cates="{:url('goods/Goodsajax/get_cates')}";
	$.post(get_cates_url,{'cid0':cid0},function(data){
		if(data.code!=1){ 
			return false;
		} 
		var list=data.data; 
		var options1='<option value="0">全部一级分类</option>';
		var options2='<option class="cate230" value="0">未选择二级分类</option> ';
		for(var i in list){
			if(list[i]['fid']==0){
				options1+='<option value="'+i+'" >'+list[i]['code']+','+list[i]['name']+'</option>';
			}else{
				options2+='<option ttype="'+list[i]['type']+'" class="cate20 cate21'+list[i]['fid']+' cate23'+i+'" value="'+i+'" >'+list[i]['code']+','+list[i]['name']+'</option>';
			}
		 
		} 
		$('#cate1').html(options1); 
		$('#cate2').html(options2); 
		if(cid0>0){
			$('#cate1').val(cid0);  
		}
		if(cid>0){
			$('#cate2').val(cid);  
		}
		
	},'json'); 
	$('#cate1').change(function(){
		cid0=$(this).val(); 
		cate(cid0,$(this).parent(),0);
	});
	function cate(cid0,$dir,cid){
		if(cid0==0){
			$dir.find('.cate .cate20').show(); 
		}else{
			$dir.find('.cate .cate20').hide();
			$dir.find('.cate .cate21'+cid0).show();
		} 
		$dir.find('.cate .cate23'+cid).prop('selected','selected');
	}
});


</script>